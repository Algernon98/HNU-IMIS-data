"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var _slicedToArray=function(){function t(t,e){var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=t[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!e||n.length!==e);a=!0);}catch(l){r=!0,i=l}finally{try{!a&&o["return"]&&o["return"]()}finally{if(r)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_student$TraningProgr=student.TraningProgram,findOneData=_student$TraningProgr.findOneData,findPyfaglKzInfo=_student$TraningProgr.findPyfaglKzInfo,getPageData=_student$TraningProgr.getPageData,_Qz=Qz,frameService=_Qz.frameService,routes=[],router=new VueRouter({routes:routes});Qz.init().then(function(t){var e=_slicedToArray(t,2),n=(e[0],e[1]);window.app=new Vue({el:"#app",store:n,router:router,components:{pyfakc:Qz.component({app:"student",module:"student-traning-program-info",template:"student-traning-program-manage-course.html",resCode:"XSMH020303",scripts:["student.traning.program.info.service.js","student.traning.program.manage.course.js"]}),pyfasm:Qz.component({app:"student",module:"student-traning-program-info",template:"student-traning-program-manage-explain.html",resCode:"XSMH020304",scripts:["student.traning.program.info.service.js","student.traning.program.manage.explain.js"]}),xfyq:Qz.component({app:"student",module:"student-traning-program-info",template:"student-traning-program-manage-xfyq.html",resCode:"XSMH020305",scripts:["student.traning.program.info.service.js","student.traning.program.manage.xfyq.js"]}),jxjc:Qz.component({app:"student",module:"student-traning-program-info",template:"student-traning-program-manage-progress.html",resCode:"XSMH020306",scripts:["student.traning.program.info.service.js","student.traning.program.manage.progress.js"]})},data:function(){return{resCode:"XSMH020302",dictCodeList:["jw_whether"],currentView:"pyfakc",kclxs:"pyfakc",businessDic:{zyfx:[],xfyqlb:{1:"xfyq_kctx",2:"xfyq_kcxz",3:"xfyq_kclb",4:"xfyq_szklb"},txjb:[{label:"1级",value:"1"},{label:"2级",value:"2"},{label:"3级",value:"3"}]},size:biz.dialogSize("w4"),hasLoading:!1,tableLoading:!1,rowData:{id:"",version:"",category:"pyfakc",xfyq:"xfyq_kctx",categoryTitle:"",zy_name1:"",ssdw_name:"",ssdw_id:"",jczy003id:"",jczy004id:"",zyfxId:"",pyfa004id:"",txjb:"1",pyfa00103id:"",xz:"",smxxControl:!1,xfyqControl:!1,jxjcControl:!1,kbjsynd:""},zhPyfand:"",pyfa00103idList:{},nowMaxVersion:"",maxVersion:"",parms:{version:[],creditRequirement:[],profession:[]},iscome:!1,iswfmesData:{shzt_name:"",businessid:"",iswfmes:"",workflowtask:"",instanceid:""},iswfmes:"",data:{},title:""}},created:function(){this.rowData.categoryTitle=this.resI18n.lb_zykcjh||"专业课程计划",this.update(),this.businessDic.txjb=[{label:this.resI18n.lb_1j||"1级",value:"1"},{label:this.resI18n.lb_2j||"2级",value:"2"},{label:this.resI18n.lb_3j||"3级",value:"3"}]},computed:{version:function(){var t=this,e=[];if(this.parms.version.length<=6)e.push.apply(e,_toConsumableArray(this.parms.version));else{var n=[],a=[],r=[];this.parms.version.forEach(function(e){e.value<t.rowData.version?n.push(e):e.value==t.rowData.version?a.push(e):r.push(e)}),0==n.length?r.splice(5,r.length-5):1==n.length?r.splice(4,r.length-4):2==n.length?r.splice(n.length-3,r.length-3):0==r.length?n.splice(0,n.length-5):1==r.length?n.splice(0,n.length-4):2==r.length?n.splice(0,n.length-3):(n.splice(0,n.length-2),r.splice(3,r.length-3)),e.push.apply(e,n.concat(a,r))}return e}},watch:{"data.xfyq":function(t){this.rowData.pyfa00103id=this.pyfa00103idList[t]},kclxs:function(t){this.currentView=t},"rowData.version":function(t){var e={};e.pyfa004id=this.data.id,e.synd=t}},methods:{complete:function(){var t={};t.pyfa004id=this.data.id,t.synd=this.rowData.version},getData:function(){var t=this;findOneData({id:this.data.id}).then(function(e){if(e&&0!=e.length&&e[0].synds&&0!=e[0].synds.length){t.tableLoading=!0,t.hasLoading=!0;var n=e[0].qsbbh;if(t.rowData.version=t.nowMaxVersion=n,t.rowData.version=t.rowData.version.toString(),t.maxVersion=n+20,t.rowData.jczy004id=e[0].jczy004id,t.rowData.jczy003id=e[0].skdwid,t.rowData.ssdw_name=e[0].ssdw_name,t.rowData.skdwbh=e[0].skdwbh,t.rowData.zy_name1=e[0].zy_name,t.rowData.zybh=e[0].zybh,t.rowData.pyfa004id=e[0].id,t.rowData.sfgxh=e[0].sfgxhcode,t.getBusinessDic(),biz.getServerTime().then(function(e){findPyfaglKzInfo().then(function(n){var a=moment(e).year(),r=1;n.pyfandkz&&NaN!==Number(n.pyfandkz)&&(r=Number(n.pyfandkz)),t.zhPyfand=(a+r).toString()})}),e[0].synds){t.parms.version.splice(0,t.parms.version.length);var a=e[0].synds.split(",");a.forEach(function(e,n){t.parms.version.push({label:e+(t.resI18n.lb_ji||"级"),value:e})}),t.rowData.version=t.nowMaxVersion=a[a.length-1]}else t.parms.version.push({label:n+(t.resI18n.lb_ji||"级"),value:n});t.iscome=!0}})},getBusinessDic:function(){var t=this;biz.getBusinessDict({JwPublicZy:{zylbcode:"2",pid:this.rowData.jczy004id?this.rowData.jczy004id:""}}).then(function(e){var n;t.businessDic.zyfx.push({name:t.rowData.zy_name1,id:""}),(n=t.businessDic.zyfx).push.apply(n,_toConsumableArray(e.JwPublicZy)),t.rowData.zyfxId=""})},changeVersions:function(t){this.rowData.version=t.value,this.rowData.version=this.rowData.version.toString()},changeCategory:function(t){this.rowData.category=this.currentView=t.value,this.rowData.categoryTitle=t.title},update:function(){var t=this;this.data.id=location.hash.split("=")[3],getPageData({custom:{id:this.data.id},conditions:{},pageIndex:0,pageSize:0}).then(function(e){if(e.items.length){t.data.zylbbh=e.items[0].zylbbh,t.data.xz=e.items[0].xz_name,document.querySelector("title").innerText=t.resI18n.lb_pyfack||"专业培养方案查看["+e.items[0].zy_name+"]";var n=t.resI18n.lb_pyfack||"专业培养方案查看",a="-["+e.items[0].zybh+"]-"+e.items[0].zy_name;t.title=n+a,Object.keys(t.data).forEach(function(e){t.rowData[e]=t.data[e]}),t.getData()}})},resize:function(){this.$store.commit("windowSizeChangeToggle")}},mounted:function(){var t=this;window.addEventListener("resize",function(e){throttle(t.resize,null,20,e,100)},!1)}})});